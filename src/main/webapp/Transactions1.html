<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"> </script>
     
       <!-- <title>TODO supply a title</title> -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>

         <center>
        <h1>Welcome to Transaction Page</h1>
         </center>
        <style>
        table {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }

        td, th {
          border: 1px solid #dddddd;
          text-align: left;
          padding: 8px;
        }

        tr:nth-child(even) {
          background-color: #dddddd;
        }
        </style>
        
        <table  id="transactions_table">
          <tr>
            <th>Transaction ID</th>
            <th>Customer ID</th>
            <th>Debit</th>
            <th>Description</th>
            <th>Transaction Amount</th>
          </tr>  
        </table>
             <script>    
                    var params =  window.location.href;
                    var query = window.location.search.substring(1);
                    var vars = query.split("=");
                    var id= vars[1];
                    var cId = vars[2];
                    var cz = vars[3];
   $(document).ready(function() {
   $.ajax({
       //var tid =accounts.transactionId;
       url: "http://localhost:49000/api/customers/"+id+"/accounts/"+cz+"/transactions"
     //   url: "http://localhost:49000/api/customers/1/accounts/1/transactions"
      
    }).then(function(data) {                    
                    var html = '';
                    var i;
                    for (i = 0; i < data.length; i++) {
                       html+='<tr>';
                       html+='<td>'+data[i].transactionId+'</td>';
                       html+='<td>'+data[i].customerId+'</td>';
                       html+='<td>'+data[i].isDebit+'</td>';
                       html+='<td>'+data[i].description+'</td>';
                       html+='<td>'+data[i].transactionAmount+'</td>';
                       
                    }
                    $('#transactions_table').append(html);
                    
                }); 
            });  
   
  </script>
  


    </body>
</html>
